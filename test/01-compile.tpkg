# This is a shell archive.  Save it in a file, remove anything before
# this line, and then unpack it by entering "sh file".  Note, it may
# create directories; files and directories will be owned by you and
# have default permissions.
#
# This archive contains:
#
#	01-compile.dsc
#	01-compile.help
#	01-compile.test
#
echo x - 01-compile.dsc
sed 's/^X//' >01-compile.dsc << 'END-of-01-compile.dsc'
XBaseName: 01-compile
XVersion: 1.0
XDescription: compile ldns
XCreationDate: Fri Oct  19 13:09:03 CEST 2005
XMaintainer: Miek Gieben
XCategory: 
XComponent:
XDepends: 
XPre: 
XPost:
XTest: 01-compile.test
XAuxFiles: 
XPassed:
XFailure:
END-of-01-compile.dsc
echo x - 01-compile.help
sed 's/^X//' >01-compile.help << 'END-of-01-compile.help'
XSynopsis: tpkg  -a ../../ exe 01-compile.tpkg
X-a path: path is where the source lives
Xas the test is executed in it own subsdir it will
Xneed ../../ is you use a relative path
END-of-01-compile.help
echo x - 01-compile.test
sed 's/^X//' >01-compile.test << 'END-of-01-compile.test'
X[ -f ../.tpkg.var.master ] && source ../.tpkg.var.master
X
Xexport PATH=$PATH:/usr/sbin:/sbin:/usr/local/bin:/usr/local/sbin:.
X
X# first arg is the build dir
XTPKG_BUILD=$1
X
Xcd $TPKG_BUILD
X
Xcase $OSTYPE in
X        linux*)
X                libtoolize && autoreconf && \
X                ./configure && \
X                make
X                make allautoconf
X                make drill
X        ;;
X        freebsd*)
X                libtoolize && \
X                autoconf259 && autoheader259 && \
X                ./configure && \
X                gmake
X                ( cd drill ;  autoconf259 && autoheader259 )
X                gmake drill
X        ;;
Xesac
END-of-01-compile.test
exit

